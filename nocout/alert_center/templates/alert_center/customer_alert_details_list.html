{% extends "nocout/base.html" %}
{% block breadcrumb_title %}
    <li>Alert Center</li>
    <li>Alert Details</li>
    <li>Customer Details</li>
{% endblock %}
{% block content_title %}Customer Details{% endblock %}
{% block content_description %} {% endblock %}
{% load staticfiles %}
{% block css %}
    <!-- JQUERY UI-->
    <link rel="stylesheet" type="text/css" href={% static "js/jquery-ui-1.10.3.custom/css/custom-theme/jquery-ui-1.10.3.custom.min.css" %} >
{% endblock %}

{% block page_setting_block %}
    <!-- GIS Page  -->
<!--     <span class="pull-right col-md-6">
        <div class="btn-group pull-right">
            <ul class="list-unstyled list-inline">
                <li>
                    <button id="customerDetailBtn" class="btn btn-info btn-sm" onclick="cd_alert_showFilters();" data-complete-text="<i class='fa fa-filter'></i> Advance Filters" data-loading-text="Please Wait...">
                        <i class='fa fa-filter'></i> Advance Filters
                    </button>

                    <button id="removeCDetailFilterBtn" class="btn btn-danger btn-sm hide" onclick="cd_alert_removeFilters();" style="margin-left:10px;">
                        <i class='fa fa-times'></i> Remove Filters
                    </button>
                </li>
            </ul>            
        </div>
        <div class="clearfix"></div> 
        <form class="horizontal-form pull-right" action="#">
            <div class="form-group">
                <label class="control-label pull-left">Alert Types &nbsp;&nbsp;&nbsp;</label> 
                <div class="pull-left">

                    <label class="radio-inline">
                        <input type="radio" id="customer_detail_current_alarm" class="radioField" value="current" name="alarm_type"> Current
                    </label>
                    <label class="radio-inline">
                        <input type="radio" id="customer_detail_clear_alarm" class="radioField" value="clear" name="alarm_type"> Clear
                    </label>
                    <label class="radio-inline">
                        <input type="radio" id="customer_detail_history_alarm" class="radioField" value="history" name="alarm_type"> History
                    </label>
                </div>
            </div>
            <div class="clearfix"></div>
        </form>
        <div class="clearfix"></div>        
    </span> -->
    <!-- /DATE RANGE PICKER -->
{% endblock %}

{% block content %}

    <div class="box border lite">
        <div id="tableContainer_div" class="box-title">
            <h4><i class="fa fa-bell"></i>CUSTOMER DETAILS</h4>

        </div>

        <div class="box-body">
            <!-- cAlert_detail_container Start-->
            <div id="cAlert_detail_container">

                <div class="tabbable header-tabs">
                    <!-- nav-tab Start -->
                    <ul class="nav nav-tabs">
                        <li><a href="#customer_wimax_block" data-toggle="tab"><span class="">Wimax</span></a></li>
                        <li><a href="#customer_pmp_block" data-toggle="tab"><span class="">PMP</span></a></li>
                        <li class="active"><a href="#customer_ptp_block" data-toggle="tab"><span class="">PTP</span></a></li>
                    </ul>
                    <!-- nav-tab End -->

                    <!-- tab-content Start -->
                    <div class="tab-content" style="overflow:auto;">
                        <!-- customer_ptp_block Start -->
                        <div class="tab-pane fade in active" id="customer_ptp_block">
                            <table cellpadding="0" cellspacing="0" border="0" class="datatable table table-striped table-bordered table-hover" id="customer_ptp_block_table">
                                <thead></thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <!-- customer_ptp_block End -->

                        <!-- customer_pmp_block Start -->
                        <div class="tab-pane fade" id="customer_pmp_block">
                            <table cellpadding="0" cellspacing="0" border="0" class="datatable table table-striped table-bordered table-hover" id="">
                                <thead>
                                    <th></th>
                                    <th>Received Time</th>
                                    <th>Event Type</th>
                                    <th>Event Name</th>
                                    <th>Device Type</th>
                                    <th>Host Alias</th>
                                    <th>IP Address</th>
                                    <th>Description</th>
                                </thead>
                                <tbody></tbody>
                            </table>

                        </div>
                        <!-- customer_pmp_block End -->

                        <!-- customer_wimax_block Start -->
                        <div class="tab-pane fade" id="customer_wimax_block">
                            <table cellpadding="0" cellspacing="0" border="0" class="datatable table table-striped table-bordered table-hover" id="">
                                <thead>
                                    <th></th>
                                    <th>Received Time</th>
                                    <th>Event Type</th>
                                    <th>Event Name</th>
                                    <th>Device Type</th>
                                    <th>Host Alias</th>
                                    <th>IP Address</th>
                                    <th>Description</th>
                                </thead>
                                <tbody></tbody>
                            </table>
                        </div>
                        <!-- customer_wimax_block End -->
                    </div>
                    <!-- tab-content Start -->
                </div>
            </div>
            <!-- cAlert_detail_container End-->
            <div class="clearfix"></div>
        </div>
    </div>
{% endblock %}

{% block jquery %}
<!-- Custom script for data table-->

<!-- Library to load tab content on tab click-->
<script type="text/javascript" src={% static "js/nocout/openTabContentLib.js" %}></script>
<script type="text/javascript">
    var dataTableInstance = "";
    $(document).ready(function () {
    /* Removing the pagination in the datatable*/
        function ourDataTableWidget()
                {
                    /**
                     * This function creates the jquery data table on given domElement
                     * @class ourDataTableWidget
                     * @method createDataTable
                     * @param tableId "String" It contains the dom selector of table
                     * @param tableheaders {JSON Object} It contains the grid headers object
                     * @param ajax_url "String" It contains the ajax url from which the data is to be loaded
                     */
                    this.createDataTable = function(tableId, tableheaders, ajax_url, destroy)
                    {
                        /*Show the spinner*/
                        showSpinner();

                        destroy = typeof destroy !== 'undefined' ? destroy : true;
                        $('.datatable').each(function () {
                            var datatable = $(this);
                            // SEARCH - Add the placeholder for Search and Turn this into in-line form control
                            var search_input = datatable.closest('.dataTables_wrapper').find('div[id$=_filter] input');
                            search_input.attr('placeholder', 'Search');
                            search_input.addClass('form-control input-sm');
                            // LENGTH - Inline-Form control
                            var length_sel = datatable.closest('.dataTables_wrapper').find('div[id$=_length] select');
                            length_sel.addClass('form-control input-sm');
                        });
                        if (destroy){
                            $("#"+tableId).dataTable().fnDestroy();
                        }
                        var dtable = $("#"+tableId).DataTable({
                            bAutoWidth: false,
                            bPaginate: true,
                            bProcessing : true,
                            bServerSide: false,
                            sAjaxSource: ajax_url,
                            /*This is the callback funtion for data ajax call*/
                            fnInitComplete : function(oSettings, json) {
                                /*Hide the spinner*/
                                hideSpinner();
                            },
                            aoColumns:tableheaders,
                            sPaginationType: "bs_full",
                            aaSorting: [[10, 'desc'],[0, 'asc']]
                        });
                    };
                }

        /*Make a instance of ourDataTableWidget class */
        var dataTableInstance = new ourDataTableWidget();
        /*Ajax url to get grid data*/
        var ajax_url = '{% url "Customer_PTP_Block_Table" %}?data_tab=' + 'P2P',
        	destroy= false,
        	gridHeadersObj = $.parseJSON('{{ customer_ptp_block_table_header|safe }}');

        /*Hide SECTOR ID Column*/
        for(var i=0;i<gridHeadersObj.length;i++) {
			var column = gridHeadersObj[i];
			if(column.mData.indexOf("sector_id") > -1) {
				if(column.bVisible) {
					column.bVisible = false;
				} else {
					column["bVisible"] = false;
				}
			}
		}
		/*Call createDataTable function of ourDataTableWidget class*/
        dataTableInstance.createDataTable("customer_ptp_block_table", gridHeadersObj, ajax_url, destroy);
    });

    function cd_alert_showFilters() {

        if($("#removeCDetailFilterBtn").hasClass("hide")) {

            $("#removeCDetailFilterBtn").removeClass("hide");
        }

        bootbox.dialog({
            message: "Advance Filters Block",
            title: '<i class="fa fa-filter">&nbsp;</i> Advance Filters',
            buttons: {
                success: {
                    label: "Search",
                    className: "btn-success",
                    callback: function() {

                    }
                },
                danger: {
                    label: "Cancel",
                    className: "btn-danger",
                    callback: function() {
                        
                    }
                }            
            }
        });
                
    }

    function cd_alert_removeFilters() {

        if($("#removeCDetailFilterBtn").hasClass("hide")) {

            $("#removeCDetailFilterBtn").removeClass("hide");
        } else {

            $("#removeCDetailFilterBtn").addClass("hide");
        }
    }

</script>
{% endblock %}

{% block load_js %}
<!-- /JAVASCRIPTS -->

<script>
    jQuery(document).ready(function () {
        App.setPage("");  //Set current page
        App.init(); //Initialise plugins and elements
    });
</script>
{% endblock %}