{% extends "inventory/inventory.html" %}
{% load staticfiles %}
{% block breadcrumb_page_title %} > Device Group {% endblock %}
{% block content_title %}Device Groups Management{% endblock %}
{% block content_description %}List of device groups ....{% endblock %}
{% block content %}
    <p><a href="/device_group/new"><i class="fa fa-plus">&nbsp;</i> Create Device Group</a></p>
    <div class="box border lite">
        <div id="tableContainer_div" class="box-title">
            <h4><i class="fa fa-table"></i>DEVICE GROUP LISTING</h4>

            <div class="tools hidden-xs">
                <a href="#box-config" data-toggle="modal" class="config">
                    <i class="fa fa-cog"></i>
                </a>
                <a href="javascript:;" class="reload">
                    <i class="fa fa-refresh"></i>
                </a>
                <a href="javascript:;" class="collapse">
                    <i class="fa fa-chevron-up"></i>
                </a>
                <a href="javascript:;" class="remove">
                    <i class="fa fa-times"></i>
                </a>
            </div>
        </div>

        <div id="tableContainer" class="box-body">
            <table cellpadding="0" cellspacing="0" border="0"
                   class="datatable table table-striped table-bordered table-hover" id="DeviceGroupTable">
                <thead></thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
{% endblock %}
{% block jquery %}
    <script type="text/javascript" src={% static "js/utils/jqueryDataTable.js" %}></script>
    <script type="text/javascript">

        $(document).ready(function (e) {
                    /*Make a instance of ourDataTableWidget class */
                    var dataTableInstance = new ourDataTableWidget();

                    /*Call createDataTable function of ourDataTableWidget class*/
                    var tableObject = $.parseJSON('{{ datatable_headers|safe }}');
                    var ajax_url = '{% url "DeviceGroupListingTable" %}'
                    dataTableInstance.createDataTable("DeviceGroupTable", tableObject, ajax_url);

                    $('.datatable').each(function () {
                        var datatable = $(this);
                        // SEARCH - Add the placeholder for Search and Turn this into in-line form control
                        var search_input = datatable.closest('.dataTables_wrapper').find('div[id$=_filter] input');
                        search_input.attr('placeholder', 'Search');
                        search_input.addClass('form-control input-sm');
                        // LENGTH - Inline-Form control
                        var length_sel = datatable.closest('.dataTables_wrapper').find('div[id$=_length] select');
                        length_sel.addClass('form-control input-sm');
                    });
                }
        );

        function get_soft_delete_form(data) {
            bootbox.dialog({
                message: data.message,
                title: "<span class='text-danger'><i class='fa fa-times'></i> Delete Device Group</span>",
                buttons: {
                    success: {
                        label: "Yes!",
                        className: "btn-success",
                        callback: function () {
                            Dajaxice.device_group.device_group_soft_delete(Dajax.process, {
                                'device_group_id': $('#id_device_group').val(),
                                'new_parent_id': $('#id_parent').val()});
                        }
                    },
                    danger: {
                        label: "No!",
                        className: "btn-danger",
                        callback: function () {
                            bootbox.alert("Ok! You choose to not delete this device group right now.", function () {
                                $(".bootbox").modal("hide");
                            });
                        }
                    }
                }
            });
        }
    </script>
{% endblock %}